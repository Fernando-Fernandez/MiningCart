
<!-- saved from url=(0037)http://js1k.com/2013-spring/demo/1459 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="color-scheme" content="light dark"></head><body><div class="line-gutter-backdrop"></div><form autocomplete="off"><label class="line-wrap-control">Line wrap<input type="checkbox" aria-label="Line wrap"></label></form><table><tbody><tr><td class="line-number" value="1"></td><td class="line-content"><span class="html-doctype">&lt;!doctype html&gt;</span></td></tr><tr><td class="line-number" value="2"></td><td class="line-content"><span class="html-tag">&lt;html&gt;</span></td></tr><tr><td class="line-number" value="3"></td><td class="line-content">  <span class="html-comment">&lt;!--</span></td></tr><tr><td class="line-number" value="4"></td><td class="line-content"><span class="html-comment">  (c) &amp;copy; js1k.com, 2010 - 2019</span></td></tr><tr><td class="line-number" value="5"></td><td class="line-content"><span class="html-comment">  Note: submissions belong to their respective owner, do not copy without their consent</span></td></tr><tr><td class="line-number" value="6"></td><td class="line-content"><span class="html-comment">  --&gt;</span></td></tr><tr><td class="line-number" value="7"></td><td class="line-content">  <span class="html-tag">&lt;head&gt;</span></td></tr><tr><td class="line-number" value="8"></td><td class="line-content">    <span class="html-tag">&lt;title&gt;</span>JS1k 2013 - Demo 1459 - "Strange crystals"<span class="html-tag">&lt;/title&gt;</span></td></tr><tr><td class="line-number" value="9"></td><td class="line-content">    <span class="html-tag">&lt;meta <span class="html-attribute-name">charset</span>="<span class="html-attribute-value">utf-8</span>"&gt;</span></td></tr><tr><td class="line-number" value="10"></td><td class="line-content">    <span class="html-tag">&lt;meta <span class="html-attribute-name">http-equiv</span>="<span class="html-attribute-value">Content-Security-Policy</span>" <span class="html-attribute-name">content</span>="<span class="html-attribute-value"> connect-src 'none' ; default-src 'none' ; font-src 'self' ; frame-src 'self' data: ; worker-src 'self' data: ; img-src 'self' data: ssl.google-analytics.com ; media-src data: ; object-src data: ; style-src 'self' data: 'unsafe-inline' ; script-src 'unsafe-inline' 'unsafe-eval' www.google-analytics.com ; </span>" <span class="html-attribute-name">help</span>="<span class="html-attribute-value">please report csp-related problems to valid demos!</span>" &gt;</span> </td></tr><tr><td class="line-number" value="11"></td><td class="line-content">    <span class="html-tag">&lt;meta <span class="html-attribute-name">name</span>="<span class="html-attribute-value">author</span>" <span class="html-attribute-name">content</span>="<span class="html-attribute-value">Philippe Deschaseaux</span>"&gt;</span></td></tr><tr><td class="line-number" value="12"></td><td class="line-content">    <span class="html-tag">&lt;meta <span class="html-attribute-name">name</span>="<span class="html-attribute-value">description</span>" <span class="html-attribute-name">content</span>="<span class="html-attribute-value">JS1k 2013 demo: &amp;quot;Strange crystals&amp;quot; -- &amp;quot;The miners have stopped working. They are afraid. It all seems to&nbsp;come&nbsp;from those strange crystals that some have seen.&amp;quot;</span>"&gt;</span></td></tr><tr><td class="line-number" value="13"></td><td class="line-content">    <span class="html-tag">&lt;meta <span class="html-attribute-name">name</span>="<span class="html-attribute-value">pubdate</span>" <span class="html-attribute-name">content</span>="<span class="html-attribute-value">20130325</span>"&gt;</span></td></tr><tr><td class="line-number" value="14"></td><td class="line-content">    <span class="html-tag">&lt;link <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">icon</span>" <span class="html-attribute-name">type</span>="<span class="html-attribute-value">image/png</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://js1k.com/favicon.png" rel="noreferrer noopener">https://js1k.com/favicon.png</a>"&gt;</span></td></tr><tr><td class="line-number" value="15"></td><td class="line-content">    <span class="html-tag">&lt;link <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">canonical</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://js1k.com/2013-spring/demo/1459" rel="noreferrer noopener">https://js1k.com/2013-spring/demo/1459</a>"&gt;</span></td></tr><tr><td class="line-number" value="16"></td><td class="line-content">    <span class="html-tag">&lt;link <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">alternate</span>" <span class="html-attribute-name">type</span>="<span class="html-attribute-value">application/rss+xml</span>" <span class="html-attribute-name">title</span>="<span class="html-attribute-value">New demo feed</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://js1k.com/feed.xml" rel="noreferrer noopener">https://js1k.com/feed.xml</a>"&gt;</span></td></tr><tr><td class="line-number" value="17"></td><td class="line-content">    <span class="html-tag">&lt;link <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">shortlink</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://js1k.com/1459" rel="noreferrer noopener">https://js1k.com/1459</a>"&gt;</span></td></tr><tr><td class="line-number" value="18"></td><td class="line-content">    <span class="html-tag">&lt;script&gt;</span></td></tr><tr><td class="line-number" value="19"></td><td class="line-content">      setTimeout(function(){</td></tr><tr><td class="line-number" value="20"></td><td class="line-content">        var ga = document.createElement('script');</td></tr><tr><td class="line-number" value="21"></td><td class="line-content">        ga.async = true;</td></tr><tr><td class="line-number" value="22"></td><td class="line-content">        ga.defer = true;</td></tr><tr><td class="line-number" value="23"></td><td class="line-content">        ga.src = 'https://www.google-analytics.com/ga.js';</td></tr><tr><td class="line-number" value="24"></td><td class="line-content">        ga.onload = function(){try{_gat._getTracker('UA-19882353-1')._trackPageview();}catch(e){window.console&amp;&amp;console.log("ga fail :'( ");};};</td></tr><tr><td class="line-number" value="25"></td><td class="line-content">        var s = document.getElementsByTagName('script')[0];</td></tr><tr><td class="line-number" value="26"></td><td class="line-content">        s.parentNode.insertBefore(ga, s);</td></tr><tr><td class="line-number" value="27"></td><td class="line-content">      }, 10);</td></tr><tr><td class="line-number" value="28"></td><td class="line-content">    <span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="29"></td><td class="line-content">    <span class="html-tag">&lt;style&gt;</span></td></tr><tr><td class="line-number" value="30"></td><td class="line-content">      /* https://qfox.nl/notes/333 */</td></tr><tr><td class="line-number" value="31"></td><td class="line-content">      body,html,iframe{margin:0;padding:0;border:0;width:100%;height:100%}</td></tr><tr><td class="line-number" value="32"></td><td class="line-content">      iframe{position:absolute;top:0;left:0;padding-top:50px;box-sizing:border-box}</td></tr><tr><td class="line-number" value="33"></td><td class="line-content">      header{position:relative;z-index:1;height:47px;padding-top:2px;border-bottom:1px solid #000;box-shadow:0 -10px 25px #ccc inset;background-color:#eee}</td></tr><tr><td class="line-number" value="34"></td><td class="line-content">      aside,div,h1,p{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-align:center;font-size:16px;font-weight:inherit;line-height:22px;padding:0;margin:0;cursor:default}</td></tr><tr><td class="line-number" value="35"></td><td class="line-content">      aside,h1{display:inline}</td></tr><tr><td class="line-number" value="36"></td><td class="line-content">      a{color:#000;text-decoration:none;border-bottom:1px dashed #000}</td></tr><tr><td class="line-number" value="37"></td><td class="line-content">      a:hover{border-bottom:1px solid red}</td></tr><tr><td class="line-number" value="38"></td><td class="line-content">      a[href="0"]{text-decoration:line-through;pointer-events:none;border-bottom:0;color:#ccc}</td></tr><tr><td class="line-number" value="39"></td><td class="line-content">      .button{float:left;width:40px;height:40px;line-height:40px;text-align:center;padding:0;margin:2px 0 0 10px;border:1px solid #888;border-color:#ddd #888 #888 #ddd;font-family:sans-serif;font-size:30px;font-weight:700;cursor:pointer}</td></tr><tr><td class="line-number" value="40"></td><td class="line-content">      .button:hover{color:red;border-bottom-color:#888}</td></tr><tr><td class="line-number" value="41"></td><td class="line-content">      .r{margin-right:10px}</td></tr><tr><td class="line-number" value="42"></td><td class="line-content">      time{display:none}</td></tr><tr><td class="line-number" value="43"></td><td class="line-content">    <span class="html-tag">&lt;/style&gt;</span></td></tr><tr><td class="line-number" value="44"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="45"></td><td class="line-content">  <span class="html-tag">&lt;/head&gt;</span></td></tr><tr><td class="line-number" value="46"></td><td class="line-content">  <span class="html-tag">&lt;body&gt;</span></td></tr><tr><td class="line-number" value="47"></td><td class="line-content">    <span class="html-tag">&lt;header&gt;</span></td></tr><tr><td class="line-number" value="48"></td><td class="line-content">      <span class="html-tag">&lt;div&gt;</span></td></tr><tr><td class="line-number" value="49"></td><td class="line-content">        <span class="html-tag">&lt;h1&gt;</span></td></tr><tr><td class="line-number" value="50"></td><td class="line-content">          <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://js1k.com/" rel="noreferrer noopener">https://js1k.com</a>"&gt;</span>JS1k<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="51"></td><td class="line-content">          <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://js1k.com/2013-spring" rel="noreferrer noopener">https://js1k.com/2013-spring</a>"&gt;</span>2013<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="52"></td><td class="line-content">          <span class="html-tag">&lt;strong&gt;</span><span class="html-tag">&lt;/strong&gt;</span> demo</td></tr><tr><td class="line-number" value="53"></td><td class="line-content">          &amp;mdash;</td></tr><tr><td class="line-number" value="54"></td><td class="line-content">          "Strange crystals" by Philippe Deschaseaux</td></tr><tr><td class="line-number" value="55"></td><td class="line-content">        <span class="html-tag">&lt;/h1&gt;</span></td></tr><tr><td class="line-number" value="56"></td><td class="line-content">        <span class="html-tag">&lt;p&gt;</span></td></tr><tr><td class="line-number" value="57"></td><td class="line-content">          <span class="html-tag">&lt;em&gt;</span></td></tr><tr><td class="line-number" value="58"></td><td class="line-content">            &amp;quot;The miners have stopped working. They are afraid. It all seems to&nbsp;come&nbsp;from those strange crystals that some have seen.&amp;quot;</td></tr><tr><td class="line-number" value="59"></td><td class="line-content">          <span class="html-tag">&lt;/em&gt;</span></td></tr><tr><td class="line-number" value="60"></td><td class="line-content">        <span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="61"></td><td class="line-content">        <span class="html-tag">&lt;aside&gt;</span></td></tr><tr><td class="line-number" value="62"></td><td class="line-content">          &amp;mdash;</td></tr><tr><td class="line-number" value="63"></td><td class="line-content">          1021 bytes</td></tr><tr><td class="line-number" value="64"></td><td class="line-content">          &amp;mdash;</td></tr><tr><td class="line-number" value="65"></td><td class="line-content">          <span class="html-comment">&lt;!-- --&gt;</span></td></tr><tr><td class="line-number" value="66"></td><td class="line-content">          <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://js1k.com/2013-spring/details/1459" rel="noreferrer noopener">https://js1k.com/2013-spring/details/1459</a>"&gt;</span>demo details<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="67"></td><td class="line-content">          &amp;mdash;</td></tr><tr><td class="line-number" value="68"></td><td class="line-content">          <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://js1k.com/2013-spring/demos" rel="noreferrer noopener">https://js1k.com/2013-spring/demos</a>"&gt;</span>list of demos<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="69"></td><td class="line-content">          <span class="html-comment">&lt;!-- </span></td></tr><tr><td class="line-number" value="70"></td><td class="line-content"><span class="html-comment">          &lt;b&gt;&lt;a href="https://js1k.com/2013-spring/demo/"&gt;</span></td></tr><tr><td class="line-number" value="71"></td><td class="line-content"><span class="html-comment">            Update available here!</span></td></tr><tr><td class="line-number" value="72"></td><td class="line-content"><span class="html-comment">          &lt;/a&gt;&lt;/b&gt;</span></td></tr><tr><td class="line-number" value="73"></td><td class="line-content"><span class="html-comment">          &lt;!-- --&gt;</span></td></tr><tr><td class="line-number" value="74"></td><td class="line-content">          &amp;mdash;</td></tr><tr><td class="line-number" value="75"></td><td class="line-content">          <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://js1k.com/1459" rel="noreferrer noopener">https://js1k.com/1459</a>" <span class="html-attribute-name">title</span>="<span class="html-attribute-value">short link for your mobile devices</span>" <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">nofollow</span>"&gt;</span>js1k.com/1459<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="76"></td><td class="line-content">        <span class="html-tag">&lt;/aside&gt;</span></td></tr><tr><td class="line-number" value="77"></td><td class="line-content">      <span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="78"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="79"></td><td class="line-content">      <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="http://js1k.com/2013-spring/demo/1458" rel="noreferrer noopener">1458</a>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">button p</span>"&gt;</span>&amp;Larr;<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="80"></td><td class="line-content">      <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="http://js1k.com/2013-spring/demo/1460" rel="noreferrer noopener">1460</a>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">button n</span>"&gt;</span>&amp;Rarr;<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="81"></td><td class="line-content">    <span class="html-tag">&lt;/header&gt;</span></td></tr><tr><td class="line-number" value="82"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="83"></td><td class="line-content">    <span class="html-tag">&lt;script <span class="html-attribute-name">type</span>="<span class="html-attribute-value">demo</span>"&gt;</span></td></tr><tr><td class="line-number" value="84"></td><td class="line-content">_="b.bgColor=X=Y=H=I=J=E=Q=U=V=0;T=[l=1];C=(c.width=c.h_=innerH_)/2;setInterval(function(`i=H;i&lt;X+1;H=++i`(s=8j)(D=i/80P=D&amp;1-Q+(Q=5$K=OD(K+2+(5))%3-1,B=OD&gt;9!BkW=1@*-1EF=(s&lt;160)-(s&gt;639=[IJ,JK,UV,V=P*E,O(L=-2j)*L^3)/1,95];if(10==0`y=Z=9@+z=W*g=/6;g&lt;6.3;g2/Z)&gt;(PB?.4:)&gt;.5)1.1*Z*+11)4-F,Z*)+24-Ft=2*,w=t*t*/6;B*w&gt;.2;)tw,- ,tw*=@, QB*W&gt;.62*,1./21+!B-	,	-6@,@L0.ZZ+z-Ak.A.6PB(40-,$1k8,3))}5-6)}q=T[X%1];d=--i-X;),f=C/(d/10+3$v=g=tux=GNl=G?g++l:G?3:1$y=d/18j;z=,w=G;`v!=w(v=w,#Style='hsl(0%,'+16Nw&amp;7)Nw&amp;8y+xNw&lt;16))+'%)'#Rect(t+z-(z=)/u-+(w==12f*6*+X/)$z,)}Y4-3*X/)+q[2]^4;X=0|Y},35)random()p.push([g++]cos(g=C+fNp[g]-q-d*q)^3,,7+B*1.A4j	2-kZ-8-z||for(Math.&amp;&amp;6,i%f*G);&gt;.+z,Z*-Z202,p=T[1]1A14B*E/1A-6.0,+=exp(- -y1.1#a.fill$),@.8A5,GpN*(O!P^/3e_eight`){j00k7,";for(Y=0;$="kj`_^ONGA@$# 	"[Y++];)Z=_.split($),_=Z.join(Z.pop());eval(_)</td></tr><tr><td class="line-number" value="85"></td><td class="line-content">    <span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="86"></td><td class="line-content">    <span class="html-tag">&lt;script&gt;</span></td></tr><tr><td class="line-number" value="87"></td><td class="line-content">      (function(){var doc=document;var header=doc.getElementsByTagName("header")[0];var firstChild=header.firstChild;var p=doc.getElementsByClassName("p")[0];var n=doc.getElementsByClassName("n")[0];header.insertBefore(p,firstChild);header.insertBefore(n,firstChild);header.appendChild(doc.getElementsByTagName("p")[0])})();</td></tr><tr><td class="line-number" value="88"></td><td class="line-content">      (function reload(){var doc=document;var header=doc.getElementsByTagName("header")[0];var iframe=doc.createElement("iframe");doc.body.appendChild(iframe);var iwin=iframe.contentWindow;var idoc=iframe.contentDocument;idoc.open();idoc.close();idoc.write('&lt;!doctype html&gt;&lt;head&gt;&lt;meta charset="utf-8"&gt;&lt;body&gt;');idoc.head.innerHTML="&lt;style&gt;\n"+"html, body { margin: 0; padding: 0; border: 0; width: 100%; height: 100%; }\n"+"&lt;/style&gt;\n";idoc.body.innerHTML="\n\t\t"+"&lt;canvas"+' id="c"'+''+"&gt;&lt;/canvas&gt;\n"+</td></tr><tr><td class="line-number" value="89"></td><td class="line-content">      (true?"&lt;script&gt;\x3c/script&gt;\n":"")+"";var Audio=iwin.Audio;iwin.Audio=function(x){return new Audio(x)};if(true){var canvas=idoc.getElementsByTagName("canvas")[0];iwin.a=canvas.getContext("2d");iwin.b=idoc.body;iwin.c=canvas;var p2d=iwin.Path2D;function wrap(ctx){var fill=ctx.fill,clip=ctx.clip,stroke=ctx.stroke;ctx.scale=ctx.scale;ctx.drawFocusIfNeeded=ctx.drawFocusIfNeeded;ctx.ellipse=ctx.ellipse;ctx.fill=function(r){fill.call(ctx,r==="evenodd"?"evenodd":"nonzero")};ctx.stroke=</td></tr><tr><td class="line-number" value="90"></td><td class="line-content">        function(p){if(p&amp;&amp;p2d&amp;&amp;p instanceof p2d)stroke.call(ctx,p);else stroke.call(ctx)};ctx.clip=function(p){if(p&amp;&amp;p2d&amp;&amp;p instanceof p2d)clip.call(ctx,p);else clip.call(ctx)};return ctx}if(false){var cvs=iwin.c;var cNode=cvs.cloneNode;cvs.cloneNode=function(){var clone=cNode.apply(cvs,arguments);var cloneGet=clone.getContext;clone.getContext=function(){return wrap(cloneGet.call(clone,"2d"))};return clone};var get=cvs.getContext;cvs.getContext=function(){return wrap(get.call(cvs,"2d"))}}if(true)wrap(iwin.a)}idoc.body.clientWidth;</td></tr><tr><td class="line-number" value="91"></td><td class="line-content">        var demo=idoc.createElement("script");var scrpt=doc.querySelector('script[type="demo"]').textContent.replace(/m.location=m.location;/,"top.reload();");if(false)scrpt="A=0,B=0;"+scrpt;demo.textContent=scrpt;idoc.body.appendChild(demo);idoc.close();iframe.contentWindow.focus();var r=doc.createElement("div");r.innerHTML="&amp;#8635;";r.className="button r";r.title="restart just the demo (local, without remote fetch)";window.reload=r.onclick=function(){doc.body.removeChild(iframe);r.parentElement.removeChild(r);</td></tr><tr><td class="line-number" value="92"></td><td class="line-content">          iframe=null;r=null;idoc=null;header=null;reload()};var firstLine=doc.getElementsByTagName("div")[0];header.insertBefore(r,firstLine)})();</td></tr><tr><td class="line-number" value="93"></td><td class="line-content">    <span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="94"></td><td class="line-content">  <span class="html-tag">&lt;/body&gt;</span></td></tr><tr><td class="line-number" value="95"></td><td class="line-content"><span class="html-tag">&lt;/html&gt;</span></td></tr><tr><td class="line-number" value="96"></td><td class="line-content"><span class="html-end-of-file"></span></td></tr></tbody></table></body></html>